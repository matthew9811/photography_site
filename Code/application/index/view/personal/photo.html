<html>
<head>
    <meta charset="UTF-8">
    <link href="/Code/public/static/bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <link href="../common/css/personal.css" rel="stylesheet" />
    <script src="/Code/public/static/jquery.js" type="text/javascript"></script>
</head>
<body style="background-color: #F4F7F9">
<div class="container">
    <div id="photos">
        <div class="photo_div">
        <div class="icon_div">
            <span class="glyphicon glyphicon-plus add_icon"></span>
            <!--<input type="file" name="file" id="name" class="icon_div">-->
        </div>
        <input type="file" name="name" id="name" class="icon_div" style="position:absolute;opacity:0;"/>
        </div>
        <div class='photo_div'>
            <img src='../common/image/personal_bg.jpg' class='img_div'>
        </div>
        <div class='photo_div'>
            <img src='../common/image/personal_bg.jpg' class='img_div'>
        </div>
        <div class='photo_div'>
            <img src='../common/image/personal_bg.jpg' class='img_div'>
        </div>
    </div>
</div>

</body>
<script type="text/javascript">
    $(function () {
        //获取上传的文件并预览
        $("#name").change(function(){
            var objUrl = getObjectURL(this.files[0]) ;//获取文件信息
            //console.log("objUrl = "+objUrl);
            if (objUrl) {
                $("#photos").append("<div class='photo_div'>" +
                    "            <img src='" + objUrl + "' class='img_div'>" +
                    "        </div>");
                IFrameResize();//每次新增照片时获取当前页面的高度
            }
        }) ;
        function getObjectURL(file) {
            var url = null;
            if (window.createObjectURL!=undefined) {
                url = window.createObjectURL(file) ;
            } else if (window.URL!=undefined) { // mozilla(firefox)
                url = window.URL.createObjectURL(file) ;
            } else if (window.webkitURL!=undefined) { // webkit or chrome
                url = window.webkitURL.createObjectURL(file) ;
            }
            return url ;
        }

        //获取当前页面的高度，再调整父页面中iframe的高度
        function IFrameResize(){
            //alert(this.document.body.scrollHeight); //弹出当前页面的高度
            var obj = parent.document.getElementById("external-frame");  //取得父页面IFrame对象
            //alert(obj.height); //弹出父页面中IFrame中设置的高度
            obj.height = this.document.body.scrollHeight;  //调整父页面中IFrame的高度为此页面的高度
        }

    })
</script>
</html>